{% extends "base.html" %}

{% block content %}
<h2>⚙️ User Settings</h2>

<div class="checkout-form-container">

    <form method="POST" action="{{ url_for('save_preferences') }}" class="checkout-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="form-group">
            <label>Autosave:</label>
            <select name="autosave" class="form-control">
                <option value="enable" {% if preferences and preferences.autosave == 'enable' %}selected{% endif %}>Enable</option>
                <option value="disable" {% if preferences and preferences.autosave == 'disable' %}selected{% endif %}>Disable</option>
            </select>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="notifications" {% if preferences and preferences.notifications %}checked{% endif %}>
                Enable Notifications
            </label>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="footbit" {% if preferences and preferences.footbit %}checked{% endif %}>
                Subscribe to Footbit
            </label>
        </div>

        <div class="form-group">
            <label>Language:</label>
            <select name="language" class="form-control">
                <option value="en" {% if preferences and preferences.language == 'en' %}selected{% endif %}>English</option>
                <option value="es" {% if preferences and preferences.language == 'es' %}selected{% endif %}>Spanish</option>
                <option value="fr" {% if preferences and preferences.language == 'fr' %}selected{% endif %}>French</option>
            </select>
        </div>

        <button type="submit" class="place-order-btn">Save Preferences</button>
    </form>

    {% if preferences %}
    <div class="order-details" style="margin-top: 20px;">
        <h3>Current Preferences</h3>
        <p><strong>Autosave:</strong> {{ 'Enable' if preferences.autosave else 'Disable'}}</p>
        <p><strong>Notifications:</strong> {{ 'Enabled' if preferences.notifications else 'Disabled' }}</p>
        <p><strong>Footbit:</strong> {{ 'Subscribed' if preferences.footbit else 'Not Subscribed' }}</p>
        <p><strong>Language:</strong> {{ preferences.language }}</p>
        <p><strong>Last Saved:</strong> {{ preferences.saved_date }}</p>
        <p><em>Saved in: user_data/preferences_{{ current_user.id }}.dat using pickle</em></p>
    </div>
    {% endif %}
</div>

<a href="{{ url_for('index') }}" class="back-link">← Back to Home</a>
{% endblock %}
